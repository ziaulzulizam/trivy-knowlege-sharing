<?php
require_once 'vendor/autoload.php';

use Monolog\Logger;
use Monolog\Handler\StreamHandler;
use Twig\Environment;
use Twig\Loader\FilesystemLoader;

// Create a log channel
$log = new Logger('app');
$log->pushHandler(new StreamHandler('app.log', Logger::WARNING));

// Initialize Twig
$loader = new FilesystemLoader('templates');
$twig = new Environment($loader);

// Sample vulnerable application
echo $twig->render('index.html', [
    'title' => 'Vulnerable PHP Application',
    'message' => 'This application contains known vulnerabilities for demonstration purposes.'
]);

$log->warning('Application accessed', ['ip' => $_SERVER['REMOTE_ADDR'] ?? 'unknown']);
?>